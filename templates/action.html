<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Action Suggestion</title>
    <style>
        #feedbackForm { display: none; }
        .timer { font-size: 24px; margin: 20px 0; }
    </style>
</head>
<body>
    <h1>Suggested Action: {{ action }}</h1>
    <div class="timer">Timer: <span id="time"></span> minutes</div>
    
    <div id="feedbackForm">
        <h2>Feedback on Your Session</h2>
        <form action="/feedback" method="post">
            <input type="hidden" name="state" value="{{ state }}">
            <input type="hidden" name="action" value="{{ action }}">
            <label for="duration">Actual Duration (minutes):</label>
            <input type="number" name="duration" id="duration" min="0" required>
            <br>
            <label for="feeling">Feeling about future study sessions:</label>
            <select name="feeling" id="feeling">
                <option value="motivated">Motivated</option>
                <option value="dread">Dread</option>
                <option value="indifferent">Indifferent</option>
            </select>
            <br>
            <button type="submit">Submit Feedback</button>
        </form>
    </div>
    
    <script>
        function startTimer(duration) {
            var timer = duration, display = document.getElementById('time');
            display.textContent = timer;
            var countdown = setInterval(function() {
                timer--;
                display.textContent = timer;
                if (timer <= 0) {
                    clearInterval(countdown);
                    document.getElementById('feedbackForm').style.display = 'block';
                }
            }, 60000); // Update every minute
        }

        window.onload = function () {
            var duration = {{ duration }}; // Duration from Flask
            startTimer(duration);
        };
    </script>
    <a href="/">Back</a>
</body>
</html>
